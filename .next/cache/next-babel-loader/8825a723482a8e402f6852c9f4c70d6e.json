{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/products/create.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport Router from \"next/router\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from '../../../components/Backdrop';\nimport moduleName from '../../../components/Modal';\n\nvar createProduct = /*#__PURE__*/function (_Component) {\n  _inherits(createProduct, _Component);\n\n  var _super = _createSuper(createProduct);\n\n  function createProduct() {\n    var _this;\n\n    _classCallCheck(this, createProduct);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      creating: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"CreateEventHandler\", function () {\n      _this.setState({\n        creating: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modalConfirmHandler\", function () {\n      _this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modalCancelHandler\", function () {\n      _this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_renderCreateProduct\", function () {\n      var _s = $RefreshSig$();\n\n      return _s(function () {\n        _s();\n\n        var _useState = useState(false),\n            _useState2 = _slicedToArray(_useState, 2),\n            edit = _useState2[0],\n            setEdit = _useState2[1];\n\n        var _useState3 = useState(null),\n            _useState4 = _slicedToArray(_useState3, 2),\n            file = _useState4[0],\n            setFile = _useState4[1];\n\n        var _useState5 = useState({\n          name: \"\",\n          description: \"\",\n          price: \"\",\n          stockqty: \"\",\n          imageUrl: \"\"\n        }),\n            _useState6 = _slicedToArray(_useState5, 2),\n            productData = _useState6[0],\n            setProductData = _useState6[1];\n\n        var _useMutation = useMutation(CREATE_PRODUCT, {\n          refetchQueries: [{\n            query: QUERY_PRODUCTS\n          }]\n        }),\n            _useMutation2 = _slicedToArray(_useMutation, 2),\n            createProduct = _useMutation2[0],\n            _useMutation2$ = _useMutation2[1],\n            loading = _useMutation2$.loading,\n            error = _useMutation2$.error;\n\n        var handleChange = function handleChange(e) {\n          return setProductData(_objectSpread(_objectSpread({}, productData), {}, _defineProperty({}, e.target.name, e.target.value)));\n        };\n\n        var selectFile = function selectFile(e) {\n          var files = e.target.files;\n          setFile(files[0]); //console.log(files)\n        }; //Upload File to Cloudinary\n\n\n        var uploadFile = /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            var data, res, result;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    data = new FormData();\n                    data.append(\"file\", file);\n                    data.append(\"upload_preset\", \"shoppin\");\n                    _context.next = 5;\n                    return fetch(\"https://api.cloudinary.com/v1_1/swizce/image/upload\", {\n                      method: \"post\",\n                      body: data\n                    });\n\n                  case 5:\n                    res = _context.sent;\n                    _context.next = 8;\n                    return res.json();\n\n                  case 8:\n                    result = _context.sent;\n                    return _context.abrupt(\"return\", result.secure_url);\n\n                  case 10:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function uploadFile() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n\n        var handleSubmit = /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n            var url, result;\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n                    e.preventDefault();\n                    _context2.next = 4;\n                    return uploadFile();\n\n                  case 4:\n                    url = _context2.sent;\n\n                    if (!url) {\n                      _context2.next = 10;\n                      break;\n                    }\n\n                    _context2.next = 8;\n                    return createProduct({\n                      variables: _objectSpread(_objectSpread({}, productData), {}, {\n                        price: +productData.price,\n                        imageUrl: url\n                      })\n                    });\n\n                  case 8:\n                    result = _context2.sent;\n                    return _context2.abrupt(\"return\", result);\n\n                  case 10:\n                    Router.push(\"/userProducts\");\n                    _context2.next = 16;\n                    break;\n\n                  case 13:\n                    _context2.prev = 13;\n                    _context2.t0 = _context2[\"catch\"](0);\n                    console.log(_context2.t0);\n\n                  case 16:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, null, [[0, 13]]);\n          }));\n\n          return function handleSubmit(_x) {\n            return _ref2.apply(this, arguments);\n          };\n        }();\n\n        return __jsx(\"div\", {\n          className: \"create-product__Card\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 7\n          }\n        }, __jsx(\"form\", {\n          onSubmit: handleSubmit,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 9\n          }\n        }, __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"productname\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }\n        }, \"Product Name:\"), __jsx(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"Enter Product Name\",\n          value: productData.name,\n          onChange: handleChange,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"address\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }\n        }, \"Product Desc:\"), __jsx(\"textarea\", {\n          type: \"text\",\n          name: \"description\",\n          placeholder: \"Product Description\",\n          value: productData.description,\n          onChange: handleChange,\n          rows: \"4\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"city\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }\n        }, \"Price:\"), __jsx(\"input\", {\n          type: \"number\",\n          name: \"price\",\n          placeholder: \"Price\",\n          value: productData.price,\n          onChange: handleChange,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"stockqty\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }\n        }, \"Stock Qty:\"), __jsx(\"input\", {\n          type: \"number\",\n          name: \"stockqty\",\n          placeholder: \"Stock Qualtity\",\n          value: productData.stockqty,\n          onChange: handleChange,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"contact\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }\n        }, \"--Select Categories--\"), __jsx(\"input\", {\n          type: \"text\",\n          name: \"contact\",\n          placeholder: \"Contact No.\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"contact\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }\n        }, \"--Select Brands--\"), __jsx(\"input\", {\n          type: \"text\",\n          name: \"contact\",\n          placeholder: \"Contact No.\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"contact\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }\n        }, \"Product Image\"), __jsx(\"input\", {\n          type: \"file\",\n          name: \"file\",\n          placeholder: \"file *.png, *.jpg...\",\n          onChange: selectFile,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-submit\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 11\n          }\n        }, __jsx(\"button\", {\n          className: \"btn__cancel\",\n          onClick: function onClick() {\n            return Router.push(\"/userProducts\");\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }\n        }, \"Back\"), __jsx(\"button\", {\n          className: \"btn__submit\",\n          type: \"submit\",\n          style: {\n            cursor: !productData.name || !productData.description || !productData.price || !file || loading ? \"not-allowed\" : \"pointer\"\n          },\n          disabled: !productData.name || !productData.description || !productData.price || !file || loading,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }\n        }, \"Submit\", loading ? \"Submiting...\" : \"\"))));\n      }, \"SQ53qCg1U+a4Z6nFb+KyohO2ipk=\", true);\n    });\n\n    return _this;\n  }\n\n  _createClass(createProduct, [{\n    key: \"render\",\n    value: function render() {\n      var CreateForm = this._renderCreateProduct();\n\n      return __jsx(React.Fragment, null, __jsx(Sidebar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"main-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }, __jsx(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }\n      }), __jsx(\"main\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"view__header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }\n      }, __jsx(\"h3\", {\n        className: \"dash-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }\n      }, \"\\u0EAA\\u0EC9\\u0EB2\\u0E87\\u0E82\\u0ECD\\u0EC9\\u0EA1\\u0EB9\\u0E99\\u0E81\\u0EC8\\u0EBD\\u0EA7\\u0E81\\u0EB1\\u0E9A\\u0EAA\\u0EB5\\u0E99\\u0E84\\u0EC9\\u0EB2\"), __jsx(\"a\", {\n        onClick: function onClick() {\n          return Router.push(\"/admin/products\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      }, __jsx(\"span\", {\n        className: \"ti-angle-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }\n      }), __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }, \"\\u0E81\\u0EB1\\u0E9A\\u0E84\\u0EB7\\u0E99\"))), __jsx(\"section\", {\n        className: \"recent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"activity-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 15\n        }\n      }, this.state.creating && __jsx(Backdrop, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 39\n        }\n      }), this.state.creating && __jsx(Modal, {\n        title: \"Create Product\",\n        canCancel: true,\n        canConfirm: true,\n        onCancel: this.modalCancelHandler,\n        onConfirm: this.modalConfirmHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }\n      }, __jsx(CreateForm, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 19\n        }\n      })))))));\n    }\n  }]);\n\n  return createProduct;\n}(Component);\n\nexport default createProduct;","map":{"version":3,"sources":["/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/products/create.jsx"],"names":["React","Component","Router","Sidebar","Header","Backdrop","moduleName","createProduct","creating","setState","useState","edit","setEdit","file","setFile","name","description","price","stockqty","imageUrl","productData","setProductData","useMutation","CREATE_PRODUCT","refetchQueries","query","QUERY_PRODUCTS","loading","error","handleChange","e","target","value","selectFile","files","uploadFile","data","FormData","append","fetch","method","body","res","json","result","secure_url","handleSubmit","preventDefault","url","variables","push","console","log","cursor","CreateForm","_renderCreateProduct","state","modalCancelHandler","modalConfirmHandler"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Router from \"next/router\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from '../../../components/Backdrop';\nimport moduleName from '../../../components/Modal';\n\nclass createProduct extends Component {\n  state = {\n    creating: false,\n  };\n\n  CreateEventHandler = () => {\n    this.setState({ creating: true });\n  };\n\n  modalConfirmHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  modalCancelHandler = () => {\n    this.setState({ creating: false });\n  };\n\n    /**\n   * Create Form Component with Function\n   */\n  _renderCreateProduct = () => () => {\n    const [edit, setEdit] = useState(false);\n    const [file, setFile] = useState(null);\n    const [productData, setProductData] = useState({\n      name: \"\",\n      description: \"\",\n      price: \"\",\n      stockqty: \"\",\n      imageUrl: \"\",\n    });\n\n    const [createProduct, { loading, error }] = useMutation(CREATE_PRODUCT, {\n      refetchQueries: [{ query: QUERY_PRODUCTS }],\n    });\n\n    const handleChange = (e) =>\n      setProductData({\n        ...productData,\n        [e.target.name]: e.target.value,\n      });\n\n    const selectFile = (e) => {\n      const files = e.target.files;\n      setFile(files[0]);\n      //console.log(files)\n    };\n\n    //Upload File to Cloudinary\n    const uploadFile = async () => {\n      const data = new FormData();\n      data.append(\"file\", file);\n      data.append(\"upload_preset\", \"shoppin\");\n      const res = await fetch(\n        \"https://api.cloudinary.com/v1_1/swizce/image/upload\",\n        {\n          method: \"post\",\n          body: data,\n        }\n      );\n      const result = await res.json();\n      //console.log('image result',  result)\n      return result.secure_url;\n    };\n\n    const handleSubmit = async (e) => {\n      try {\n        e.preventDefault();\n        const url = await uploadFile();\n        // console.log('image Url:', url)\n        if (url) {\n          const result = await createProduct({\n            variables: {\n              ...productData,\n              price: +productData.price,\n              imageUrl: url,\n            },\n          });\n          //console.log('Product Data:', result)\n          return result;\n        }\n        Router.push(\"/userProducts\");\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    return (\n      <div className=\"create-product__Card\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-control\">\n            <label htmlFor=\"productname\">Product Name:</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Enter Product Name\"\n              value={productData.name}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"address\">Product Desc:</label>\n            <textarea\n              type=\"text\"\n              name=\"description\"\n              placeholder=\"Product Description\"\n              value={productData.description}\n              onChange={handleChange}\n              rows=\"4\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"city\">Price:</label>\n            <input\n              type=\"number\"\n              name=\"price\"\n              placeholder=\"Price\"\n              value={productData.price}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"stockqty\">Stock Qty:</label>\n            <input\n              type=\"number\"\n              name=\"stockqty\"\n              placeholder=\"Stock Qualtity\"\n              value={productData.stockqty}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"contact\">--Select Categories--</label>\n            <input type=\"text\" name=\"contact\" placeholder=\"Contact No.\" />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"contact\">--Select Brands--</label>\n            <input type=\"text\" name=\"contact\" placeholder=\"Contact No.\" />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"contact\">Product Image</label>\n            <input\n              type=\"file\"\n              name=\"file\"\n              placeholder=\"file *.png, *.jpg...\"\n              onChange={selectFile}\n            />\n          </div>\n          <div className=\"form-submit\">\n            <button\n              className=\"btn__cancel\"\n              onClick={() => Router.push(\"/userProducts\")}\n            >\n              Back\n            </button>\n            <button\n              className=\"btn__submit\"\n              type=\"submit\"\n              style={{\n                cursor:\n                  !productData.name ||\n                  !productData.description ||\n                  !productData.price ||\n                  !file ||\n                  loading\n                    ? \"not-allowed\"\n                    : \"pointer\",\n              }}\n              disabled={\n                !productData.name ||\n                !productData.description ||\n                !productData.price ||\n                !file ||\n                loading\n              }\n            >\n              Submit{loading ? \"Submiting...\" : \"\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  render() {\n    const CreateForm = this._renderCreateProduct();\n    return (\n      <>\n        <Sidebar />\n        <div className=\"main-content\">\n          <Header />\n          <main>\n            <div className=\"view__header\">\n              <h3 className=\"dash-title\">ສ້າງຂໍ້ມູນກ່ຽວກັບສີນຄ້າ</h3>\n              <a onClick={() => Router.push(\"/admin/products\")}>\n                <span className=\"ti-angle-left\"></span>\n                <small>ກັບຄືນ</small>\n              </a>\n            </div>\n\n            <section className=\"recent\">\n              <div className=\"activity-card\">\n              {this.state.creating && <Backdrop />}\n              {this.state.creating && (\n                <Modal\n                  title=\"Create Product\"\n                  canCancel\n                  canConfirm\n                  onCancel={this.modalCancelHandler}\n                  onConfirm={this.modalConfirmHandler}\n                >\n                  <CreateForm />\n                </Modal>\n              )}\n              </div>\n            </section>\n          </main>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default createProduct;\n"]},"metadata":{},"sourceType":"module"}