{"ast":null,"code":"var _jsxFileName = \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/brands/index.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, useState } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from \"../../../components/Backdrop\";\nimport Modal from \"../../../components/Modal\";\nimport BrandList from \"../../../components/Brands/BrandList\";\nimport { CREATE_BRAND, QUERY_BRANDS } from \"../../../graphql/Brands\";\n\nclass Brands extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      creating: false\n    });\n\n    _defineProperty(this, \"CreateEventHandler\", () => {\n      this.setState({\n        creating: true\n      });\n    });\n\n    _defineProperty(this, \"modalConfirmHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"modalCancelHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"_renderCreateBrand\", () => () => {\n      const {\n        0: file,\n        1: setFile\n      } = useState(null);\n      const {\n        0: brandData,\n        1: setBrandData\n      } = useState({\n        name: \"\",\n        desc: \"\",\n        logo: \"\"\n      }); //console.log(\"handle Change:\", brandData)\n      //create brands function here\n\n      const [createbrand, {\n        loading,\n        error\n      }] = useMutation(CREATE_BRAND, {\n        refetchQueries: [{\n          query: QUERY_BRANDS\n        }]\n      }); // handle Change Input from filter\n\n      const handleChange = e => setBrandData(_objectSpread(_objectSpread({}, brandData), {}, {\n        [e.target.name]: e.target.value\n      })); //Select image from Folder\n\n\n      const selectFile = e => {\n        const files = e.target.files;\n        setFile(files[0]);\n        console.log(files);\n      }; //Upload File to Cloudinary\n\n\n      const uploadFile = async () => {\n        const data = new FormData();\n        data.append(\"file\", file);\n        data.append(\"upload_preset\", \"brands_logo\");\n        const res = await fetch(\"https://api.cloudinary.com/v1_1/swizce/image/upload\", {\n          method: \"post\",\n          body: data\n        });\n        const result = await res.json();\n        console.log(\"image result\", result);\n        return result.secure_url;\n      }; // Create Handle Submit\n\n\n      const handleSubmit = async e => {\n        try {\n          e.preventDefault();\n          const url = await uploadFile(); //console.log(\"Image url:\", url)\n\n          if (url) {\n            const result = await createbrand({\n              variables: _objectSpread(_objectSpread({}, brandData), {}, {\n                name: brandData.name,\n                desc: brandData.desc,\n                logo: url\n              })\n            });\n            console.log(\"Brands Response:\", result);\n            return result;\n          }\n\n          Router.push(\"/admin/brands\");\n        } catch (error) {\n          console.log(error);\n        }\n      };\n\n      return __jsx(\"div\", {\n        className: \"create-category__card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 7\n        }\n      }, __jsx(\"form\", {\n        onSubmit: handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      }, \"Brand Name\"), __jsx(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        id: \"name\",\n        placeholder: \"Brand Name\",\n        value: brandData.name,\n        onChange: handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, \"Description\"), __jsx(\"textarea\", {\n        type: \"text\",\n        name: \"desc\",\n        id: \"desc\",\n        placeholder: \"Description\",\n        rows: \"4\",\n        value: brandData.desc,\n        onChange: handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      }, \"Brand Logo\"), __jsx(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        placeholder: \"file *.png, *.jpg...\",\n        onChange: selectFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }\n      }, __jsx(\"button\", {\n        className: \"btn__cancel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      }, \"Cancel\"), __jsx(\"button\", {\n        className: \"btn__submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      }, \"Submit\"))));\n    });\n  }\n\n  render() {\n    const CreateBrand = this._renderCreateBrand();\n\n    return __jsx(React.Fragment, null, __jsx(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, __jsx(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }), __jsx(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"view__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, __jsx(\"h3\", {\n      className: \"dash-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }, \"\\u0EC1\\u0E9A\\u0EA3\\u0E99\\u0EAA\\u0EB5\\u0E99\\u0E84\\u0EC9\\u0EB2\"), __jsx(\"a\", {\n      onClick: this.CreateEventHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, \"\\u0EC0\\u0E9E\\u0EB5\\u0EC8\\u0EA1\\u0EC1\\u0E9A\\u0EA3\\u0E99\"))), this.state.creating && __jsx(Backdrop, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 37\n      }\n    }), this.state.creating && __jsx(Modal, {\n      title: \"Create Brand\",\n      canCancel: true,\n      canConfirm: true,\n      onCancel: this.modalCancelHandler,\n      onConfirm: this.modalConfirmHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }\n    }, __jsx(CreateBrand, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    })), __jsx(\"section\", {\n      className: \"recent-categories\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"categories-grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      className: \"categories-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, __jsx(BrandList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 19\n      }\n    })), __jsx(\"div\", {\n      className: \"category-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"category-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"category-single\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-id-badge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 23\n      }\n    }), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 23\n      }\n    }, \"196\"), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 23\n      }\n    }, \"Number Of Staff\")), __jsx(\"div\", {\n      className: \"summary-single\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-calendar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, \"16\"), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }, \"Number Of Leaves\")), __jsx(\"div\", {\n      className: \"summary-single\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-face-smile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }\n    }), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 23\n      }\n    }, \"59\"), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 23\n      }\n    }, \"Profile update requested\")))))))));\n  }\n\n}\n\nexport default Brands;","map":{"version":3,"sources":["/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/brands/index.jsx"],"names":["React","Component","useState","fetch","Router","useMutation","Sidebar","Header","Backdrop","Modal","BrandList","CREATE_BRAND","QUERY_BRANDS","Brands","creating","setState","file","setFile","brandData","setBrandData","name","desc","logo","createbrand","loading","error","refetchQueries","query","handleChange","e","target","value","selectFile","files","console","log","uploadFile","data","FormData","append","res","method","body","result","json","secure_url","handleSubmit","preventDefault","url","variables","push","render","CreateBrand","_renderCreateBrand","CreateEventHandler","state","modalCancelHandler","modalConfirmHandler"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from \"../../../components/Backdrop\";\nimport Modal from \"../../../components/Modal\";\nimport BrandList from \"../../../components/Brands/BrandList\";\nimport { CREATE_BRAND, QUERY_BRANDS } from \"../../../graphql/Brands\";\n\nclass Brands extends Component {\n  state = {\n    creating: false,\n  };\n\n  CreateEventHandler = () => {\n    this.setState({ creating: true });\n  };\n\n  modalConfirmHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  modalCancelHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  /**\n   * Create Form Component with Function\n   */\n  _renderCreateBrand = () => () => {\n    const [file, setFile] = useState(null);\n    const [brandData, setBrandData] = useState({\n      name: \"\",\n      desc: \"\",\n      logo: \"\",\n    });\n    //console.log(\"handle Change:\", brandData)\n    //create brands function here\n    const [createbrand, { loading, error }] = useMutation(CREATE_BRAND, {\n      refetchQueries: [{ query: QUERY_BRANDS }],\n    });\n\n    // handle Change Input from filter\n    const handleChange = (e) =>\n      setBrandData({ ...brandData, [e.target.name]: e.target.value });\n\n    //Select image from Folder\n    const selectFile = (e) => {\n      const files = e.target.files;\n      setFile(files[0]);\n      console.log(files);\n    };\n\n    //Upload File to Cloudinary\n    const uploadFile = async () => {\n      const data = new FormData();\n      data.append(\"file\", file);\n      data.append(\"upload_preset\", \"brands_logo\");\n      const res = await fetch(\n        \"https://api.cloudinary.com/v1_1/swizce/image/upload\",\n        {\n          method: \"post\",\n          body: data,\n        }\n      );\n      const result = await res.json();\n      console.log(\"image result\", result);\n      return result.secure_url;\n    };\n\n    // Create Handle Submit\n    const handleSubmit = async (e) => {\n      try {\n        e.preventDefault();\n        const url = await uploadFile();\n        //console.log(\"Image url:\", url)\n\n        if (url) {\n          const result = await createbrand({\n            variables: {\n              ...brandData,\n              name: brandData.name,\n              desc: brandData.desc,\n              logo: url,\n            },\n          });\n\n          console.log(\"Brands Response:\", result);\n          return result;\n        }\n        Router.push(\"/admin/brands\");\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    return (\n      <div className=\"create-category__card\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-control\">\n            <label htmlFor=\"name\">Brand Name</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              placeholder=\"Brand Name\"\n              value={brandData.name}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"desc\">Description</label>\n            <textarea\n              type=\"text\"\n              name=\"desc\"\n              id=\"desc\"\n              placeholder=\"Description\"\n              rows=\"4\"\n              value={brandData.desc}\n              onChange={handleChange}\n              required\n            ></textarea>\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"image\">Brand Logo</label>\n            <input\n              type=\"file\"\n              name=\"file\"\n              placeholder=\"file *.png, *.jpg...\"\n              onChange={selectFile}\n            />\n          </div>\n          <div className=\"form-submit\">\n            <button className=\"btn__cancel\">Cancel</button>\n            <button className=\"btn__submit\">Submit</button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  render() {\n    const CreateBrand = this._renderCreateBrand();\n    return (\n      <>\n        <Sidebar />\n        <div className=\"main-content\">\n          <Header />\n          <main>\n            <div className=\"view__header\">\n              <h3 className=\"dash-title\">ແບຣນສີນຄ້າ</h3>\n              <a onClick={this.CreateEventHandler}>\n                <span className=\"ti-plus\"></span>\n                <small>ເພີ່ມແບຣນ</small>\n              </a>\n            </div>\n            {this.state.creating && <Backdrop />}\n            {this.state.creating && (\n              <Modal\n                title=\"Create Brand\"\n                canCancel\n                canConfirm\n                onCancel={this.modalCancelHandler}\n                onConfirm={this.modalConfirmHandler}\n              >\n                <CreateBrand />\n              </Modal>\n            )}\n            <section className=\"recent-categories\">\n              <div className=\"categories-grid\">\n                <div className=\"categories-card\">\n                  <BrandList />\n                </div>\n                <div className=\"category-detail\">\n                  <div className=\"category-card\">\n                    <div className=\"category-single\">\n                      <span className=\"ti-id-badge\"></span>\n                      <h3>196</h3>\n                      <small>Number Of Staff</small>\n                    </div>\n\n                    <div className=\"summary-single\">\n                      <span className=\"ti-calendar\"></span>\n                      <h3>16</h3>\n                      <small>Number Of Leaves</small>\n                    </div>\n\n                    <div className=\"summary-single\">\n                      <span className=\"ti-face-smile\"></span>\n                      <h3>59</h3>\n                      <small>Profile update requested</small>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </section>\n          </main>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Brands;\n"]},"metadata":{},"sourceType":"module"}