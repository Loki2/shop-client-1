{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/categories/index.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, useState } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from \"../../../components/Backdrop\";\nimport Modal from \"../../../components/Modal\";\nimport CategoriesList from \"../../../components/Categories/CategoriesList\";\nimport { CREATE_CATEGORY, QUERY_CATEGORIES } from \"../../../graphql/Category\";\n\nvar Category = /*#__PURE__*/function (_Component) {\n  _inherits(Category, _Component);\n\n  var _super = _createSuper(Category);\n\n  function Category() {\n    var _this;\n\n    _classCallCheck(this, Category);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      creating: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"CreateEventHandler\", function () {\n      _this.setState({\n        creating: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modalConfirmHandler\", function () {\n      _this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modalCancelHandler\", function () {\n      _this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_renderCreateCategory\", function () {\n      var _s = $RefreshSig$();\n\n      return _s(function () {\n        _s();\n\n        var _useState = useState(null),\n            file = _useState[0],\n            setFile = _useState[1];\n\n        var _useState2 = useState({\n          name: \"\",\n          desc: \"\",\n          imageUrl: \"\"\n        }),\n            cateData = _useState2[0],\n            setCateData = _useState2[1]; //console.log(\"cateDate\", cateData)\n\n\n        var _useMutation = useMutation(CREATE_CATEGORY, {\n          refetchQueries: [{\n            query: QUERY_CATEGORIES\n          }]\n        }),\n            _useMutation2 = _slicedToArray(_useMutation, 2),\n            createCate = _useMutation2[0],\n            _useMutation2$ = _useMutation2[1],\n            loading = _useMutation2$.loading,\n            error = _useMutation2$.error; //handle Change from input\n\n\n        var handleChange = function handleChange(e) {\n          return setCateData(_objectSpread(_objectSpread({}, cateData), {}, _defineProperty({}, e.target.name, e.target.value)));\n        }; //Select image from Folder\n\n\n        var selectFile = function selectFile(e) {\n          var files = e.target.files;\n          setFile(files[0]);\n          console.log(files);\n        }; // https://api.cloudinary.com/v1_1/swizce/image/upload\n        //Upload File to Cloudinary\n\n\n        var uploadFile = /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            var data, res, result;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    data = new FormData();\n                    data.append(\"file\", file);\n                    data.append(\"upload_preset\", \"category\");\n                    _context.next = 5;\n                    return fetch(\"https://api.cloudinary.com/v1_1/swizce/image/upload\", {\n                      method: \"post\",\n                      body: data\n                    });\n\n                  case 5:\n                    res = _context.sent;\n                    _context.next = 8;\n                    return res.json();\n\n                  case 8:\n                    result = _context.sent;\n                    return _context.abrupt(\"return\", result.secure_url);\n\n                  case 10:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function uploadFile() {\n            return _ref.apply(this, arguments);\n          };\n        }(); // Create Handle Submit\n\n\n        var handleSubmit = /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n            var url, result;\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.prev = 0;\n                    e.preventDefault();\n                    _context2.next = 4;\n                    return uploadFile();\n\n                  case 4:\n                    url = _context2.sent;\n\n                    if (!url) {\n                      _context2.next = 10;\n                      break;\n                    }\n\n                    _context2.next = 8;\n                    return createCate({\n                      variables: _objectSpread(_objectSpread({}, cateData), {}, {\n                        name: cateData.name,\n                        desc: cateData.desc,\n                        imageUrl: url\n                      })\n                    });\n\n                  case 8:\n                    result = _context2.sent;\n                    return _context2.abrupt(\"return\", result);\n\n                  case 10:\n                    Router.push('/admin/categories');\n                    _context2.next = 16;\n                    break;\n\n                  case 13:\n                    _context2.prev = 13;\n                    _context2.t0 = _context2[\"catch\"](0);\n                    console.log(_context2.t0);\n\n                  case 16:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, null, [[0, 13]]);\n          }));\n\n          return function handleSubmit(_x) {\n            return _ref2.apply(this, arguments);\n          };\n        }();\n\n        return __jsx(\"div\", {\n          className: \"create-category__card\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 7\n          }\n        }, __jsx(\"form\", {\n          onSubmit: handleSubmit,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 9\n          }\n        }, __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"name\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }\n        }, \"Name\"), __jsx(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          id: \"name\",\n          placeholder: \"Category Name\",\n          value: cateData.name,\n          onChange: handleChange,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"desc\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }\n        }, \"Description\"), __jsx(\"textarea\", {\n          type: \"text\",\n          name: \"desc\",\n          id: \"desc\",\n          placeholder: \"Description\",\n          rows: \"4\",\n          value: cateData.desc,\n          onChange: handleChange,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-control\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 11\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"image\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }\n        }, \"Image\"), __jsx(\"input\", {\n          type: \"file\",\n          name: \"file\",\n          placeholder: \"file *.png, *.jpg...\",\n          onChange: selectFile,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }\n        })), __jsx(\"div\", {\n          className: \"form-submit\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 11\n          }\n        }, __jsx(\"button\", {\n          className: \"btn__cancel\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }\n        }, \"Cancel\"), __jsx(\"button\", {\n          className: \"btn__submit\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }\n        }, \"Submit\"))));\n      }, \"YmNkM5y1cHNEBHb11zXuBmaB4/4=\", false, function () {\n        return [useMutation];\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Category, [{\n    key: \"render\",\n    value: function render() {\n      var CreateCategory = this._renderCreateCategory();\n\n      return __jsx(React.Fragment, null, __jsx(Sidebar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"main-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, __jsx(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }), __jsx(\"main\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"view__header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }\n      }, __jsx(\"h3\", {\n        className: \"dash-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }\n      }, \"\\u0E9B\\u0EB0\\u0EC0\\u0E9E\\u0E94\\u0EAA\\u0EB5\\u0E99\\u0E84\\u0EC9\\u0EB2\"), __jsx(\"a\", {\n        onClick: this.CreateEventHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      }, __jsx(\"span\", {\n        className: \"ti-plus\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }\n      }), __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      }, \"\\u0EC0\\u0E9E\\u0EB5\\u0EC8\\u0EA1\\u0E9B\\u0EB0\\u0EC0\\u0E9E\\u0E94\"))), this.state.creating && __jsx(Backdrop, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 37\n        }\n      }), this.state.creating && __jsx(Modal, {\n        title: \"Create Category\",\n        canCancel: true,\n        canConfirm: true,\n        onCancel: this.modalCancelHandler,\n        onConfirm: this.modalConfirmHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }\n      }, __jsx(CreateCategory, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }\n      })), __jsx(\"section\", {\n        className: \"recent-categories\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"categories-grid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 15\n        }\n      }, __jsx(\"div\", {\n        className: \"categories-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 17\n        }\n      }, __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }\n      }, \"Recently Categories List\"), __jsx(CategoriesList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 19\n        }\n      })), __jsx(\"div\", {\n        className: \"category-detail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: \"category-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 19\n        }\n      }, __jsx(\"div\", {\n        className: \"category-single\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }\n      }, __jsx(\"span\", {\n        className: \"ti-id-badge\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 23\n        }\n      }), __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 23\n        }\n      }, \"196\"), __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 23\n        }\n      }, \"Number Of Staff\")), __jsx(\"div\", {\n        className: \"summary-single\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }\n      }, __jsx(\"span\", {\n        className: \"ti-calendar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 23\n        }\n      }), __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 23\n        }\n      }, \"16\"), __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 23\n        }\n      }, \"Number Of Leaves\")), __jsx(\"div\", {\n        className: \"summary-single\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }\n      }, __jsx(\"span\", {\n        className: \"ti-face-smile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 23\n        }\n      }), __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 23\n        }\n      }, \"59\"), __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 23\n        }\n      }, \"Profile update requested\")))))))));\n    }\n  }]);\n\n  return Category;\n}(Component);\n\nexport default Category;","map":{"version":3,"sources":["/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/categories/index.jsx"],"names":["React","Component","useState","fetch","Router","useMutation","Sidebar","Header","Backdrop","Modal","CategoriesList","CREATE_CATEGORY","QUERY_CATEGORIES","Category","creating","setState","file","setFile","name","desc","imageUrl","cateData","setCateData","refetchQueries","query","createCate","loading","error","handleChange","e","target","value","selectFile","files","console","log","uploadFile","data","FormData","append","method","body","res","json","result","secure_url","handleSubmit","preventDefault","url","variables","push","CreateCategory","_renderCreateCategory","CreateEventHandler","state","modalCancelHandler","modalConfirmHandler"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from \"../../../components/Backdrop\";\nimport Modal from \"../../../components/Modal\";\nimport CategoriesList from \"../../../components/Categories/CategoriesList\";\nimport { CREATE_CATEGORY, QUERY_CATEGORIES } from \"../../../graphql/Category\";\n\nclass Category extends Component {\n  state = {\n    creating: false,\n  };\n\n  CreateEventHandler = () => {\n    this.setState({ creating: true });\n  };\n\n  modalConfirmHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  modalCancelHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  /**\n   * Create Form Component with Function\n   */\n  _renderCreateCategory = () => () => {\n    const [file, setFile] = useState(null);\n    const [cateData, setCateData] = useState({\n      name: \"\",\n      desc: \"\",\n      imageUrl: \"\",\n    });\n\n    //console.log(\"cateDate\", cateData)\n    const [createCate, {loading, error}] = useMutation(CREATE_CATEGORY, {\n      refetchQueries: [{ query: QUERY_CATEGORIES}],\n    })\n\n    //handle Change from input\n    const handleChange = (e) =>\n      setCateData({ ...cateData, [e.target.name]: e.target.value });\n\n    //Select image from Folder\n    const selectFile = (e) => {\n      const files = e.target.files;\n      setFile(files[0]);\n      console.log(files);\n    };\n\n    // https://api.cloudinary.com/v1_1/swizce/image/upload\n    //Upload File to Cloudinary\n    const uploadFile = async () => {\n      const data = new FormData();\n      data.append(\"file\", file);\n      data.append(\"upload_preset\", \"category\");\n      const res = await fetch(\n        \"https://api.cloudinary.com/v1_1/swizce/image/upload\",\n        {\n          method: \"post\",\n          body: data,\n        }\n      );\n      const result = await res.json();\n      //console.log(\"image result\", result);\n      return result.secure_url;\n    };\n\n    // Create Handle Submit\n    const handleSubmit = async (e) => {\n      try {\n        e.preventDefault();\n        const url = await uploadFile();\n        //console.log(\"Image url:\", url)\n\n        if(url){\n          const result = await createCate({\n            variables: {\n              ...cateData,\n              name: cateData.name,\n              desc: cateData.desc,\n              imageUrl: url\n            },\n          });\n\n          //console.log(\"Category Response:\", result)\n          return result\n        }\n        Router.push('/admin/categories')\n      } catch (error) {\n        console.log(error)\n      }\n    }\n    return (\n      <div className=\"create-category__card\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-control\">\n            <label htmlFor=\"name\">Name</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              placeholder=\"Category Name\"\n              value={cateData.name}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"desc\">Description</label>\n            <textarea\n              type=\"text\"\n              name=\"desc\"\n              id=\"desc\"\n              placeholder=\"Description\"\n              rows=\"4\"\n              value={cateData.desc}\n              onChange={handleChange}\n            ></textarea>\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"image\">Image</label>\n            <input\n              type=\"file\"\n              name=\"file\"\n              placeholder=\"file *.png, *.jpg...\"\n              onChange={selectFile}\n            />\n          </div>\n          <div className=\"form-submit\">\n            <button className=\"btn__cancel\">Cancel</button>\n            <button className=\"btn__submit\">Submit</button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  render() {\n    const CreateCategory = this._renderCreateCategory();\n    return (\n      <>\n        <Sidebar />\n        <div className=\"main-content\">\n          <Header />\n          <main>\n            <div className=\"view__header\">\n              <h3 className=\"dash-title\">ປະເພດສີນຄ້າ</h3>\n              <a onClick={this.CreateEventHandler}>\n                <span className=\"ti-plus\"></span>\n                <small>ເພີ່ມປະເພດ</small>\n              </a>\n            </div>\n            {this.state.creating && <Backdrop />}\n            {this.state.creating && (\n              <Modal\n                title=\"Create Category\"\n                canCancel\n                canConfirm\n                onCancel={this.modalCancelHandler}\n                onConfirm={this.modalConfirmHandler}\n              >\n                <CreateCategory />\n              </Modal>\n            )}\n            <section className=\"recent-categories\">\n              <div className=\"categories-grid\">\n                <div className=\"categories-card\">\n                  <h3>Recently Categories List</h3>\n                  <CategoriesList />\n                </div>\n                <div className=\"category-detail\">\n                  <div className=\"category-card\">\n                    <div className=\"category-single\">\n                      <span className=\"ti-id-badge\"></span>\n                      <h3>196</h3>\n                      <small>Number Of Staff</small>\n                    </div>\n\n                    <div className=\"summary-single\">\n                      <span className=\"ti-calendar\"></span>\n                      <h3>16</h3>\n                      <small>Number Of Leaves</small>\n                    </div>\n\n                    <div className=\"summary-single\">\n                      <span className=\"ti-face-smile\"></span>\n                      <h3>59</h3>\n                      <small>Profile update requested</small>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </section>\n          </main>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Category;\n"]},"metadata":{},"sourceType":"module"}