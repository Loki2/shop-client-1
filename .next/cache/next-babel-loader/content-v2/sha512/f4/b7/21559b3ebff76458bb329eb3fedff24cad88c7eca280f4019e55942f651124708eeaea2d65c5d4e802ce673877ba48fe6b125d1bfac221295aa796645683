{"ast":null,"code":"var _jsxFileName = \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/categories/index.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, useState } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from \"../../../components/Backdrop\";\nimport Modal from \"../../../components/Modal\";\nimport CategoriesList from \"../../../components/Categories/CategoriesList\";\nimport { CREATE_CATEGORY, QUERY_CATEGORIES } from \"../../../graphql/Category\";\n\nclass Category extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      creating: false\n    });\n\n    _defineProperty(this, \"CreateEventHandler\", () => {\n      this.setState({\n        creating: true\n      });\n    });\n\n    _defineProperty(this, \"modalConfirmHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"modalCancelHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"_renderCreateCategory\", () => () => {\n      const {\n        0: file,\n        1: setFile\n      } = useState(null);\n      const {\n        0: cateData,\n        1: setCateData\n      } = useState({\n        name: \"\",\n        desc: \"\",\n        imageUrl: \"\"\n      }); //console.log(\"cateDate\", cateData)\n\n      const [createCate, {\n        loading,\n        error\n      }] = useMutation(CREATE_CATEGORY, {\n        refetchQueries: [{\n          query: QUERY_CATEGORIES\n        }]\n      }); //handle Change from input\n\n      const handleChange = e => setCateData(_objectSpread(_objectSpread({}, cateData), {}, {\n        [e.target.name]: e.target.value\n      })); //Select image from Folder\n\n\n      const selectFile = e => {\n        const files = e.target.files;\n        setFile(files[0]);\n        console.log(files);\n      }; // https://api.cloudinary.com/v1_1/swizce/image/upload\n      //Upload File to Cloudinary\n\n\n      const uploadFile = async () => {\n        const data = new FormData();\n        data.append(\"file\", file);\n        data.append(\"upload_preset\", \"category\");\n        const res = await fetch(\"https://api.cloudinary.com/v1_1/swizce/image/upload\", {\n          method: \"post\",\n          body: data\n        });\n        const result = await res.json(); //console.log(\"image result\", result);\n\n        return result.secure_url;\n      }; // Create Handle Submit\n\n\n      const handleSubmit = async e => {\n        try {\n          e.preventDefault();\n          const url = await uploadFile(); //console.log(\"Image url:\", url)\n\n          if (url) {\n            const result = await createCate({\n              variables: _objectSpread(_objectSpread({}, cateData), {}, {\n                name: cateData.name,\n                desc: cateData.desc,\n                imageUrl: url\n              })\n            }); //console.log(\"Category Response:\", result)\n\n            return result;\n          }\n\n          Router.push('/admin/categories');\n        } catch (error) {\n          console.log(error);\n        }\n      };\n\n      return __jsx(\"div\", {\n        className: \"create-category__card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 7\n        }\n      }, __jsx(\"form\", {\n        onSubmit: handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, \"Name\"), __jsx(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        id: \"name\",\n        placeholder: \"Category Name\",\n        value: cateData.name,\n        onChange: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, \"Description\"), __jsx(\"textarea\", {\n        type: \"text\",\n        name: \"desc\",\n        id: \"desc\",\n        placeholder: \"Description\",\n        rows: \"4\",\n        value: cateData.desc,\n        onChange: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      }, \"Image\"), __jsx(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        placeholder: \"file *.png, *.jpg...\",\n        onChange: selectFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }\n      }, __jsx(\"button\", {\n        className: \"btn__cancel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }, \"Cancel\"), __jsx(\"button\", {\n        className: \"btn__submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      }, \"Submit\"))));\n    });\n  }\n\n  render() {\n    const CreateCategory = this._renderCreateCategory();\n\n    return __jsx(React.Fragment, null, __jsx(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, __jsx(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }), __jsx(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"view__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, __jsx(\"h3\", {\n      className: \"dash-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, \"\\u0E9B\\u0EB0\\u0EC0\\u0E9E\\u0E94\\u0EAA\\u0EB5\\u0E99\\u0E84\\u0EC9\\u0EB2\"), __jsx(\"a\", {\n      onClick: this.CreateEventHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, \"\\u0EC0\\u0E9E\\u0EB5\\u0EC8\\u0EA1\\u0E9B\\u0EB0\\u0EC0\\u0E9E\\u0E94\"))), this.state.creating && __jsx(Backdrop, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 37\n      }\n    }), this.state.creating && __jsx(Modal, {\n      title: \"Create Category\",\n      canCancel: true,\n      canConfirm: true,\n      onCancel: this.modalCancelHandler,\n      onConfirm: this.modalConfirmHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, __jsx(CreateCategory, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    })), __jsx(\"section\", {\n      className: \"recent-categories\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"categories-grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      className: \"categories-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, \"Recently Categories List\"), __jsx(CategoriesList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 19\n      }\n    })), __jsx(\"div\", {\n      className: \"category-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"category-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"category-single\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-id-badge\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 23\n      }\n    }), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 23\n      }\n    }, \"196\"), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 23\n      }\n    }, \"Number Of Staff\")), __jsx(\"div\", {\n      className: \"summary-single\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-calendar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, \"16\"), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }, \"Number Of Leaves\")), __jsx(\"div\", {\n      className: \"summary-single\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-face-smile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }\n    }), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 23\n      }\n    }, \"59\"), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 23\n      }\n    }, \"Profile update requested\")))))))));\n  }\n\n}\n\nexport default Category;","map":{"version":3,"sources":["/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/categories/index.jsx"],"names":["React","Component","useState","fetch","Router","useMutation","Sidebar","Header","Backdrop","Modal","CategoriesList","CREATE_CATEGORY","QUERY_CATEGORIES","Category","creating","setState","file","setFile","cateData","setCateData","name","desc","imageUrl","createCate","loading","error","refetchQueries","query","handleChange","e","target","value","selectFile","files","console","log","uploadFile","data","FormData","append","res","method","body","result","json","secure_url","handleSubmit","preventDefault","url","variables","push","render","CreateCategory","_renderCreateCategory","CreateEventHandler","state","modalCancelHandler","modalConfirmHandler"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from \"../../../components/Backdrop\";\nimport Modal from \"../../../components/Modal\";\nimport CategoriesList from \"../../../components/Categories/CategoriesList\";\nimport { CREATE_CATEGORY, QUERY_CATEGORIES } from \"../../../graphql/Category\";\n\nclass Category extends Component {\n  state = {\n    creating: false,\n  };\n\n  CreateEventHandler = () => {\n    this.setState({ creating: true });\n  };\n\n  modalConfirmHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  modalCancelHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  /**\n   * Create Form Component with Function\n   */\n  _renderCreateCategory = () => () => {\n    const [file, setFile] = useState(null);\n    const [cateData, setCateData] = useState({\n      name: \"\",\n      desc: \"\",\n      imageUrl: \"\",\n    });\n\n    //console.log(\"cateDate\", cateData)\n    const [createCate, {loading, error}] = useMutation(CREATE_CATEGORY, {\n      refetchQueries: [{ query: QUERY_CATEGORIES}],\n    })\n\n    //handle Change from input\n    const handleChange = (e) =>\n      setCateData({ ...cateData, [e.target.name]: e.target.value });\n\n    //Select image from Folder\n    const selectFile = (e) => {\n      const files = e.target.files;\n      setFile(files[0]);\n      console.log(files);\n    };\n\n    // https://api.cloudinary.com/v1_1/swizce/image/upload\n    //Upload File to Cloudinary\n    const uploadFile = async () => {\n      const data = new FormData();\n      data.append(\"file\", file);\n      data.append(\"upload_preset\", \"category\");\n      const res = await fetch(\n        \"https://api.cloudinary.com/v1_1/swizce/image/upload\",\n        {\n          method: \"post\",\n          body: data,\n        }\n      );\n      const result = await res.json();\n      //console.log(\"image result\", result);\n      return result.secure_url;\n    };\n\n    // Create Handle Submit\n    const handleSubmit = async (e) => {\n      try {\n        e.preventDefault();\n        const url = await uploadFile();\n        //console.log(\"Image url:\", url)\n\n        if(url){\n          const result = await createCate({\n            variables: {\n              ...cateData,\n              name: cateData.name,\n              desc: cateData.desc,\n              imageUrl: url\n            },\n          });\n\n          //console.log(\"Category Response:\", result)\n          return result\n        }\n        Router.push('/admin/categories')\n      } catch (error) {\n        console.log(error)\n      }\n    }\n    return (\n      <div className=\"create-category__card\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-control\">\n            <label htmlFor=\"name\">Name</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              placeholder=\"Category Name\"\n              value={cateData.name}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"desc\">Description</label>\n            <textarea\n              type=\"text\"\n              name=\"desc\"\n              id=\"desc\"\n              placeholder=\"Description\"\n              rows=\"4\"\n              value={cateData.desc}\n              onChange={handleChange}\n            ></textarea>\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"image\">Image</label>\n            <input\n              type=\"file\"\n              name=\"file\"\n              placeholder=\"file *.png, *.jpg...\"\n              onChange={selectFile}\n            />\n          </div>\n          <div className=\"form-submit\">\n            <button className=\"btn__cancel\">Cancel</button>\n            <button className=\"btn__submit\">Submit</button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  render() {\n    const CreateCategory = this._renderCreateCategory();\n    return (\n      <>\n        <Sidebar />\n        <div className=\"main-content\">\n          <Header />\n          <main>\n            <div className=\"view__header\">\n              <h3 className=\"dash-title\">ປະເພດສີນຄ້າ</h3>\n              <a onClick={this.CreateEventHandler}>\n                <span className=\"ti-plus\"></span>\n                <small>ເພີ່ມປະເພດ</small>\n              </a>\n            </div>\n            {this.state.creating && <Backdrop />}\n            {this.state.creating && (\n              <Modal\n                title=\"Create Category\"\n                canCancel\n                canConfirm\n                onCancel={this.modalCancelHandler}\n                onConfirm={this.modalConfirmHandler}\n              >\n                <CreateCategory />\n              </Modal>\n            )}\n            <section className=\"recent-categories\">\n              <div className=\"categories-grid\">\n                <div className=\"categories-card\">\n                  <h3>Recently Categories List</h3>\n                  <CategoriesList />\n                </div>\n                <div className=\"category-detail\">\n                  <div className=\"category-card\">\n                    <div className=\"category-single\">\n                      <span className=\"ti-id-badge\"></span>\n                      <h3>196</h3>\n                      <small>Number Of Staff</small>\n                    </div>\n\n                    <div className=\"summary-single\">\n                      <span className=\"ti-calendar\"></span>\n                      <h3>16</h3>\n                      <small>Number Of Leaves</small>\n                    </div>\n\n                    <div className=\"summary-single\">\n                      <span className=\"ti-face-smile\"></span>\n                      <h3>59</h3>\n                      <small>Profile update requested</small>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </section>\n          </main>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Category;\n"]},"metadata":{},"sourceType":"module"}