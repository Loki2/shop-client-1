{"ast":null,"code":"var _jsxFileName = \"/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/products/create.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, useState } from \"react\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Router from \"next/router\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from '../../../components/Backdrop';\nimport Modal from '../../../components/Modal';\nimport { QUERY_PRODUCTS, CREATE_PRODUCT, UPDATE_PRODUCT, MY_PRODUCTS } from \"../../../graphql/Products\";\n\nclass createProduct extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      creating: false\n    });\n\n    _defineProperty(this, \"CreateEventHandler\", () => {\n      this.setState({\n        creating: true\n      });\n    });\n\n    _defineProperty(this, \"modalConfirmHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"modalCancelHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"_renderCreateProduct\", () => () => {\n      const {\n        0: edit,\n        1: setEdit\n      } = useState(false);\n      const {\n        0: file,\n        1: setFile\n      } = useState(null);\n      const {\n        0: productData,\n        1: setProductData\n      } = useState({\n        name: \"\",\n        description: \"\",\n        price: \"\",\n        stockqty: \"\",\n        imageUrl: \"\"\n      });\n      const [createProduct, {\n        loading,\n        error\n      }] = useMutation(CREATE_PRODUCT, {\n        refetchQueries: [{\n          query: QUERY_PRODUCTS\n        }]\n      });\n\n      const handleChange = e => setProductData(_objectSpread(_objectSpread({}, productData), {}, {\n        [e.target.name]: e.target.value\n      }));\n\n      const selectFile = e => {\n        const files = e.target.files;\n        setFile(files[0]); //console.log(files)\n      }; //Upload File to Cloudinary\n\n\n      const uploadFile = async () => {\n        const data = new FormData();\n        data.append(\"file\", file);\n        data.append(\"upload_preset\", \"shoppin\");\n        const res = await fetch(\"https://api.cloudinary.com/v1_1/swizce/image/upload\", {\n          method: \"post\",\n          body: data\n        });\n        const result = await res.json(); //console.log('image result',  result)\n\n        return result.secure_url;\n      };\n\n      const handleSubmit = async e => {\n        try {\n          e.preventDefault();\n          const url = await uploadFile(); // console.log('image Url:', url)\n\n          if (url) {\n            const result = await createProduct({\n              variables: _objectSpread(_objectSpread({}, productData), {}, {\n                price: +productData.price,\n                imageUrl: url\n              })\n            }); //console.log('Product Data:', result)\n\n            return result;\n          }\n\n          Router.push(\"/admin/products\");\n        } catch (error) {\n          console.log(error);\n        }\n      };\n\n      return __jsx(\"div\", {\n        className: \"create-product__Card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }\n      }, __jsx(\"form\", {\n        onSubmit: handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"productname\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, \"Product Name:\"), __jsx(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Enter Product Name\",\n        value: productData.name,\n        onChange: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"address\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      }, \"Product Desc:\"), __jsx(\"textarea\", {\n        type: \"text\",\n        name: \"description\",\n        placeholder: \"Product Description\",\n        value: productData.description,\n        onChange: handleChange,\n        rows: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"city\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      }, \"Price:\"), __jsx(\"input\", {\n        type: \"number\",\n        name: \"price\",\n        placeholder: \"Price\",\n        value: productData.price,\n        onChange: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"stockqty\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      }, \"Stock Qty:\"), __jsx(\"input\", {\n        type: \"number\",\n        name: \"stockqty\",\n        placeholder: \"Stock Qualtity\",\n        value: productData.stockqty,\n        onChange: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"contact\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }\n      }, \"--Select Categories--\"), __jsx(\"input\", {\n        type: \"text\",\n        name: \"contact\",\n        placeholder: \"Contact No.\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"contact\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }\n      }, \"--Select Brands--\"), __jsx(\"input\", {\n        type: \"text\",\n        name: \"contact\",\n        placeholder: \"Contact No.\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"contact\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }\n      }, \"Product Image\"), __jsx(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        placeholder: \"file *.png, *.jpg...\",\n        onChange: selectFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"form-submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }\n      }, __jsx(\"button\", {\n        className: \"btn__cancel\",\n        onClick: () => Router.push(\"/userProducts\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, \"Back\"), __jsx(\"button\", {\n        className: \"btn__submit\",\n        type: \"submit\",\n        style: {\n          cursor: !productData.name || !productData.description || !productData.price || !file || loading ? \"not-allowed\" : \"pointer\"\n        },\n        disabled: !productData.name || !productData.description || !productData.price || !file || loading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }\n      }, \"Submit\", loading ? \"Submiting...\" : \"\"))));\n    });\n  }\n\n  render() {\n    // const CreateForm = this._renderCreateProduct();\n    return __jsx(React.Fragment, null, __jsx(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }\n    }, __jsx(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }\n    }), __jsx(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"view__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, __jsx(\"h3\", {\n      className: \"dash-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, \"\\u0EAA\\u0EC9\\u0EB2\\u0E87\\u0E82\\u0ECD\\u0EC9\\u0EA1\\u0EB9\\u0E99\\u0E81\\u0EC8\\u0EBD\\u0EA7\\u0E81\\u0EB1\\u0E9A\\u0EAA\\u0EB5\\u0E99\\u0E84\\u0EC9\\u0EB2\"), __jsx(\"a\", {\n      onClick: () => Router.push(\"/admin/products\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-angle-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, \"\\u0E81\\u0EB1\\u0E9A\\u0E84\\u0EB7\\u0E99\"))), __jsx(\"section\", {\n      className: \"recent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"activity-card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, __jsx(\"a\", {\n      onClick: this.CreateEventHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }, \"\\u0EC0\\u0E9E\\u0EB5\\u0EC8\\u0EA1\\u0EA1\\u0EB9\\u0E99\\u0E97\\u0EBB\\u0EC8\\u0EA7\\u0EC4\\u0E9B\"), this.state.creating && __jsx(Backdrop, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 39\n      }\n    }), this.state.creating && __jsx(Modal, {\n      title: \"Create Product\",\n      canCancel: true,\n      canConfirm: true,\n      onCancel: this.modalCancelHandler,\n      onConfirm: this.modalConfirmHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }, __jsx(CreateForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n}\n\nexport default createProduct;","map":{"version":3,"sources":["/Users/ailaodev/Desktop/Projects/Shoppin/shop-client/pages/admin/products/create.jsx"],"names":["React","Component","useState","useMutation","Router","Sidebar","Header","Backdrop","Modal","QUERY_PRODUCTS","CREATE_PRODUCT","UPDATE_PRODUCT","MY_PRODUCTS","createProduct","creating","setState","edit","setEdit","file","setFile","productData","setProductData","name","description","price","stockqty","imageUrl","loading","error","refetchQueries","query","handleChange","e","target","value","selectFile","files","uploadFile","data","FormData","append","res","fetch","method","body","result","json","secure_url","handleSubmit","preventDefault","url","variables","push","console","log","cursor","render","CreateEventHandler","state","modalCancelHandler","modalConfirmHandler"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport Router from \"next/router\";\nimport Sidebar from \"../../../components/Partials/Sidebar\";\nimport Header from \"../../../components/Partials/Header\";\nimport Backdrop from '../../../components/Backdrop';\nimport Modal from '../../../components/Modal';\nimport {\n  QUERY_PRODUCTS,\n  CREATE_PRODUCT,\n  UPDATE_PRODUCT,\n  MY_PRODUCTS,\n} from \"../../../graphql/Products\";\n\n\n\nclass createProduct extends Component {\n  state = {\n    creating: false,\n  };\n\n  CreateEventHandler = () => {\n    this.setState({ creating: true });\n  };\n\n  modalConfirmHandler = () => {\n    this.setState({ creating: false });\n  };\n\n  modalCancelHandler = () => {\n    this.setState({ creating: false });\n  };\n\n    /**\n   * Create Form Component with Function\n   */\n  _renderCreateProduct = () => () => {\n    const [edit, setEdit] = useState(false);\n    const [file, setFile] = useState(null);\n    const [productData, setProductData] = useState({\n      name: \"\",\n      description: \"\",\n      price: \"\",\n      stockqty: \"\",\n      imageUrl: \"\",\n    });\n\n    const [createProduct, { loading, error }] = useMutation(CREATE_PRODUCT, {\n      refetchQueries: [{ query: QUERY_PRODUCTS }],\n    });\n\n    const handleChange = (e) =>\n      setProductData({\n        ...productData,\n        [e.target.name]: e.target.value,\n      });\n\n    const selectFile = (e) => {\n      const files = e.target.files;\n      setFile(files[0]);\n      //console.log(files)\n    };\n\n    //Upload File to Cloudinary\n    const uploadFile = async () => {\n      const data = new FormData();\n      data.append(\"file\", file);\n      data.append(\"upload_preset\", \"shoppin\");\n      const res = await fetch(\n        \"https://api.cloudinary.com/v1_1/swizce/image/upload\",\n        {\n          method: \"post\",\n          body: data,\n        }\n      );\n      const result = await res.json();\n      //console.log('image result',  result)\n      return result.secure_url;\n    };\n\n    const handleSubmit = async (e) => {\n      try {\n        e.preventDefault();\n        const url = await uploadFile();\n        // console.log('image Url:', url)\n        if (url) {\n          const result = await createProduct({\n            variables: {\n              ...productData,\n              price: +productData.price,\n              imageUrl: url,\n            },\n          });\n          //console.log('Product Data:', result)\n          return result;\n        }\n        Router.push(\"/admin/products\");\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    return (\n      <div className=\"create-product__Card\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-control\">\n            <label htmlFor=\"productname\">Product Name:</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Enter Product Name\"\n              value={productData.name}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"address\">Product Desc:</label>\n            <textarea\n              type=\"text\"\n              name=\"description\"\n              placeholder=\"Product Description\"\n              value={productData.description}\n              onChange={handleChange}\n              rows=\"4\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"city\">Price:</label>\n            <input\n              type=\"number\"\n              name=\"price\"\n              placeholder=\"Price\"\n              value={productData.price}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"stockqty\">Stock Qty:</label>\n            <input\n              type=\"number\"\n              name=\"stockqty\"\n              placeholder=\"Stock Qualtity\"\n              value={productData.stockqty}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"contact\">--Select Categories--</label>\n            <input type=\"text\" name=\"contact\" placeholder=\"Contact No.\" />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"contact\">--Select Brands--</label>\n            <input type=\"text\" name=\"contact\" placeholder=\"Contact No.\" />\n          </div>\n          <div className=\"form-control\">\n            <label htmlFor=\"contact\">Product Image</label>\n            <input\n              type=\"file\"\n              name=\"file\"\n              placeholder=\"file *.png, *.jpg...\"\n              onChange={selectFile}\n            />\n          </div>\n          <div className=\"form-submit\">\n            <button\n              className=\"btn__cancel\"\n              onClick={() => Router.push(\"/userProducts\")}\n            >\n              Back\n            </button>\n            <button\n              className=\"btn__submit\"\n              type=\"submit\"\n              style={{\n                cursor:\n                  !productData.name ||\n                  !productData.description ||\n                  !productData.price ||\n                  !file ||\n                  loading\n                    ? \"not-allowed\"\n                    : \"pointer\",\n              }}\n              disabled={\n                !productData.name ||\n                !productData.description ||\n                !productData.price ||\n                !file ||\n                loading\n              }\n            >\n              Submit{loading ? \"Submiting...\" : \"\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  render() {\n    // const CreateForm = this._renderCreateProduct();\n    return (\n      <>\n        <Sidebar />\n        <div className=\"main-content\">\n          <Header />\n          <main>\n            <div className=\"view__header\">\n              <h3 className=\"dash-title\">ສ້າງຂໍ້ມູນກ່ຽວກັບສີນຄ້າ</h3>\n              <a onClick={() => Router.push(\"/admin/products\")}>\n                <span className=\"ti-angle-left\"></span>\n                <small>ກັບຄືນ</small>\n              </a>\n            </div>\n\n            <section className=\"recent\">\n              <div className=\"activity-card\">\n                <a onClick={this.CreateEventHandler}>ເພີ່ມມູນທົ່ວໄປ</a>\n              {this.state.creating && <Backdrop />}\n              {this.state.creating && (\n                <Modal\n                  title=\"Create Product\"\n                  canCancel\n                  canConfirm\n                  onCancel={this.modalCancelHandler}\n                  onConfirm={this.modalConfirmHandler}\n                >\n                  <CreateForm />\n                </Modal>\n              )}\n              </div>\n            </section>\n          </main>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default createProduct;\n"]},"metadata":{},"sourceType":"module"}